{
  "kind": "Template",
  "apiVersion": "v1",
  "metadata": {
    "name": "cluster-hadoop",
    "annotations": {
      "description": "An example Hadoop application",
      "tags": "Hadoop",
      "iconClass": "icon-php"
    }
  },
  "labels": {
    "template": "cluster-hadoop-example"
  },
   "objects": [
   {
			"kind": "Route",
			"apiVersion": "v1",
			"id": "cluster-hadoop-http",
			"metadata": {
				"name": "namenode-route",
				"labels": {
					"application": "cluster-hadoop"
				},
				"annotations": {
					"description": "Route for application's http service."
				}
			},
			"spec": {
				"host": "${APP_HOST_NAME}",
				"to": {
					"kind": "Service",
                    "name": "namenode-web"
				}
			}
		},
		{
            "kind": "Service",
            "apiVersion": "v1",
            "metadata": {
                "name": "namenode"
            },
            "spec": {
                "ports": [
                    {
                        "name": "namenode-web",
                        "protocol": "TCP",
                        "port": 80,
                        "targetPort": 50070,
                        "nodePort": 0
                    },
                    {
                        "name": "namenode-fs",
                        "protocol": "TCP",
                        "port": 9000,
                        "targetPort": 9000,
                        "nodePort": 0
                    }
                ],
                "selector": {
                    "name": "hadoop-namenode"
                },
                "portalIP": "",
                "type": "ClusterIP",
                "sessionAffinity": "None"
            }
        },
        {
            "kind": "Service",
            "apiVersion": "v1",
            "metadata": {
                "name": "namenode-web"
            },
            "spec": {
                "ports": [
                    {
                        "name": "namenode-web",
                        "protocol": "TCP",
                        "port": 50070,
                        "targetPort": 50070,
                        "nodePort": 0
                    }
                ],
                "selector": {
                    "name": "hadoop-namenode"
                },
                "portalIP": "",
                "type": "ClusterIP",
                "sessionAffinity": "None"
            }
        },
		{
            "kind": "ImageStream",
            "apiVersion": "v1",
            "metadata": {
                "name": "cluster-hadoop"
            },
            "spec": {
                "dockerImageRepository": "sequenceiq/hadoop-docker"
            }
        },
		{
		  "kind": "DeploymentConfig",
		  "apiVersion": "v1",
		  "metadata": {
			"name": "hadoop-namenode"
		  },
		  "spec": {
			"strategy": {
			  "type": "Recreate",
			  "resources": {}
			},
			"triggers": [
			  {
				"type": "ImageChange",
				"imageChangeParams": {
				  "automatic": true,
				  "containerNames": [
					"hadoop-namenode",
                    "hadoop-datanode"
				  ],
				  "from": {},
				  "lastTriggeredImage": ""
				}
			  }
			],
			"replicas": 1,
			"selector": {
			  "name": "frontend"
			},
			"template": {
			  "metadata": {
				"creationTimestamp": null,
				"labels": {
				  "name": "frontend"
				}
			  },
			  "spec": {
				"containers": [
				  {
					"name": "helloworld",
					"image": "openshift/openshift/origin-ruby-sample",
					"ports": [
					  {
						"containerPort": 8080,
						"protocol": "TCP"
					  }
					],
					"resources": {},
					"terminationMessagePath": "/dev/termination-log",
					"imagePullPolicy": "IfNotPresent",
					"capabilities": {},
					"securityContext": {
					  "capabilities": {},
					  "privileged": false
					}
				  }
				],
				"restartPolicy": "Always",
				"dnsPolicy": "ClusterFirst"
			  }
			}
		  }
		}		
			
	],
   "parameters": [
			{
				"name": "APPLICATION_NAME",
				"description": "The name for the application.",
				"value": "cluster-hadoop",
				"required": true
			},
			{
				"name": "APPLICATION_DOMAIN",
				"description": "Custom hostname for service routes.  Leave blank for default hostname, e.g.: \u003capplication-name\u003e.\u003cproject\u003e.\u003cdefault-domain-suffix\u003e"
			},
			{
            "name": "APP_HOST_NAME",
            "description": "The DNS name this application will be exposed on",
            "value": "hadoop.nna.nb.no"
			},
			{
            "name": "APP_HOST_NAME",
            "description": "The DNS name this application will be exposed on",
            "value": "hadoop.nna.nb.no"
			},
			{
            "name": "FRONTEND_SCHEME",
            "description": "Which scheme should be exposed in links to self",
            "value": "https"
			}
		]
 
} 
